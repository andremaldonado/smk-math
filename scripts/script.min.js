"use strict";import*as stats from"./modules/stats.mjs";import*as random from"./modules/random.mjs";let score,tries,difficult,problem,timer,time,entryTime,expectedResult;function loadMultiplicationProblem(){let e,t;problem="multiplication",e=random.getRandomInteger(0,parseInt(10*difficult)),difficult>3&&(e=random.getRandomFloat(0,parseInt(5*difficult))),t=random.getRandomInteger(0,parseInt(3*difficult)),expectedResult=e*t,tries+=1,document.getElementById("question__problem").innerHTML="Quanto é "+e+" x "+t+"?",clearResults()}function loadFractionProblem(){let e,t,n;problem="fraction",e=random.getRandomInteger(1,parseInt(10*difficult)),t=random.getRandomInteger(2,parseInt(10*difficult)),n=t*random.getRandomInteger(1,parseInt(10*difficult)),expectedResult=e/t*n,tries+=1,document.getElementById("question__problem").innerHTML="Quanto é "+e+"/"+t+" de "+n+"?",clearResults()}function loadQuestion(e){reset(),document.getElementById("question").style.display="block",e()}function reset(){score=0,tries=0,difficult=1,entryTime=Date.now(),clearResults(),document.getElementById("question__difficult").innerHTML="Dificuldade: "+difficult.toFixed(2),document.getElementById("final-score").style.display="none",document.getElementById("question__score").innerText="Pontuação: "+score+" de "+tries+" tentativas."}function startTimer(){clearInterval(timer),time=0,timer=window.setInterval((function(){time+=1,document.getElementById("question__timer").innerText="Tempo: "+time}),1e3)}function clearResults(){document.getElementById("question__timer").innerText="Tempo: 0",document.getElementById("question__result").value="",document.getElementById("question__result").focus(),startTimer()}function updateScore(e,t){score+=e==t?1:0,document.getElementById("question__score").innerText="Pontuação: "+score+" de "+tries+" tentativas.",updateDifficult()}function updateDifficult(){difficult=score/tries*(parseInt(tries/10)+1),document.getElementById("question__difficult").innerHTML="Dificuldade: "+difficult.toFixed(2)}function solveIt(){switch(updateScore(document.getElementById("question__result").value,expectedResult),problem){case"multiplication":loadMultiplicationProblem();break;case"fraction":loadFractionProblem()}return!1}function showFinalScore(e,t,n,i,o,l){document.getElementById("final-score__value").innerHTML=e,document.getElementById("final-score__time-spent").innerHTML=parseInt(t),document.getElementById("final-score__average-time-spent").innerHTML=parseInt(n),document.getElementById("final-score__difficult").innerHTML=i.toFixed(2),document.getElementById("final-score__questions").innerHTML=o,document.getElementById("final-score__answers").innerHTML=l,document.getElementById("question").style.display="none",document.getElementById("final-score").style.display="flex",document.getElementById("final-score__facebook-share").href=document.getElementById("final-score__facebook-share").href.replace("{{title}}","SMK Math - Minha pontuação foi de: "+e),document.getElementById("final-score__twitter-share").href=document.getElementById("final-score__twitter-share").href.replace("{{title}}","SMK Math - Minha pontuação foi de: "+e),document.getElementById("final-score__whatsapp-share").href=document.getElementById("final-score__whatsapp-share").href.replace("{{title}}","SMK Math - Minha pontuação foi de: "+e)}document.getElementById("header__multiplication").addEventListener("click",(function(){loadQuestion(loadMultiplicationProblem)})),document.getElementById("header__fraction").addEventListener("click",(function(){loadQuestion(loadFractionProblem)})),document.getElementById("question__result").addEventListener("keyup",(function(e){13===e.keyCode&&solveIt()})),document.getElementById("question__next").addEventListener("click",(function(){solveIt()})),document.getElementById("question__finish").addEventListener("click",(function(){showFinalScore(stats.calculateFinalScore(entryTime,score,difficult,tries),stats.calculateTimeSpent(entryTime),stats.calculateAverageTimeSpent(entryTime,tries),difficult,tries,score)})),reset();